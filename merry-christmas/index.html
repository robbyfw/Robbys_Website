<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <!-- SEO Meta Tags -->
    <title>Merry Christmas | Warm Holiday Greetings</title>
    <meta name="description" content="Christmas greetings and warm wishes for the holiday season. May this Christmas bring you peace, joy, and happiness.">
    <meta name="keywords" content="Christmas, Merry Christmas, holiday greetings, festive season, Christmas wishes">
    <meta name="author" content="Robby">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="https://fwrobby.site/merry-christmas/picture.png">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        html, body {
            height: 100%;
            overflow: hidden;
            touch-action: none;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #0c0c1d 0%, #121230 50%, #0a0a1a 100%);
            min-height: 100vh;
            min-height: -webkit-fill-available;
            color: #fff;
            position: fixed;
            width: 100%;
            height: 100%;
        }

        /* Animated Background Effect */
        .background-effect {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }

        .gradient-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 30%, rgba(255, 107, 107, 0.08) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(107, 107, 255, 0.08) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(107, 255, 107, 0.08) 0%, transparent 50%);
            animation: gradientShift 20s ease-in-out infinite alternate;
        }

        .floating-shapes {
            position: absolute;
            width: 100%;
            height: 100%;
        }

        .shape {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.03);
            filter: blur(40px);
            animation: float 25s infinite linear;
        }

        /* Main Container */
        .container {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            height: -webkit-fill-available;
            padding: 20px;
            position: relative;
            z-index: 2;
            max-width: 100%;
            overflow: hidden;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 0 15px;
            width: 100%;
            max-width: 600px;
        }

        .christmas-title {
            font-family: 'Dancing Script', cursive;
            font-size: clamp(3rem, 9vw, 5.5rem);
            background: linear-gradient(45deg, #ff6b6b, #ffd166, #6bcf7f);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 15px;
            letter-spacing: 1px;
            line-height: 1.2;
            text-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .subtitle {
            font-size: clamp(1.1rem, 4vw, 1.4rem);
            color: rgba(255, 255, 255, 0.9);
            font-weight: 300;
            letter-spacing: 0.5px;
            line-height: 1.4;
            opacity: 0.9;
        }

        /* Main Button */
        .magic-button {
            background: linear-gradient(135deg, #ff6b6b, #ff8e53);
            color: white;
            border: none;
            padding: clamp(18px, 5vw, 25px) clamp(40px, 9vw, 60px);
            font-size: clamp(1.2rem, 4vw, 1.5rem);
            font-family: 'Inter', sans-serif;
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 
                0 12px 35px rgba(255, 107, 107, 0.25),
                0 0 0 2px rgba(255, 255, 255, 0.08),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            position: relative;
            overflow: hidden;
            margin-bottom: 30px;
            font-weight: 500;
            letter-spacing: 1.2px;
            min-height: 60px;
            touch-action: manipulation;
        }

        .magic-button:hover {
            transform: translateY(-3px);
            box-shadow: 
                0 18px 45px rgba(255, 107, 107, 0.35),
                0 0 0 2px rgba(255, 255, 255, 0.12),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
        }

        .magic-button:active {
            transform: translateY(-1px);
            transition: transform 0.1s;
        }

        .button-glow {
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.15), transparent);
            transition: left 0.8s;
        }

        .magic-button:hover .button-glow {
            left: 100%;
        }

        /* Enhanced Greeting Card */
        .greeting-card {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            width: 92%;
            max-width: 520px;
            max-height: 85vh;
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.98) 0%,
                rgba(248, 249, 250, 0.96) 100%);
            border-radius: 24px;
            padding: clamp(28px, 6vw, 45px) clamp(22px, 5vw, 40px);
            box-shadow: 
                0 30px 60px rgba(0, 0, 0, 0.25),
                0 0 0 1px rgba(255, 255, 255, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.8);
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            backdrop-filter: blur(25px);
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            border: 1px solid rgba(255, 255, 255, 0.4);
        }

        .greeting-card.active {
            opacity: 1;
            visibility: visible;
            transform: translate(-50%, -50%) scale(1);
        }

        .card-header {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
        }

        .card-title {
            font-family: 'Dancing Script', cursive;
            font-size: clamp(2.4rem, 7vw, 3.3rem);
            background: linear-gradient(45deg, #ff6b6b, #ff8e53);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
            line-height: 1.2;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .card-subtitle {
            color: #666;
            font-size: clamp(1rem, 3.5vw, 1.2rem);
            font-weight: 400;
            letter-spacing: 0.3px;
            opacity: 0.9;
        }

        .message-container {
            position: relative;
            padding: clamp(20px, 5vw, 30px);
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.95) 0%,
                rgba(245, 245, 245, 0.95) 100%);
            border-radius: 18px;
            margin-bottom: 25px;
            box-shadow: 
                0 8px 30px rgba(0, 0, 0, 0.08),
                inset 0 1px 0 rgba(255, 255, 255, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.6);
        }

        .message-content {
            font-size: clamp(1.05rem, 3.8vw, 1.25rem);
            line-height: 1.75;
            color: #333;
            text-align: center;
            font-weight: 400;
            position: relative;
            z-index: 1;
        }

        .message-decoration {
            position: absolute;
            top: 15px;
            left: 15px;
            width: 30px;
            height: 30px;
            border-top: 2px solid #ff6b6b;
            border-left: 2px solid #ff6b6b;
            opacity: 0.3;
        }

        .message-decoration-bottom {
            position: absolute;
            bottom: 15px;
            right: 15px;
            width: 30px;
            height: 30px;
            border-bottom: 2px solid #6bcf7f;
            border-right: 2px solid #6bcf7f;
            opacity: 0.3;
        }

        .signature {
            text-align: center;
            font-size: clamp(1.2rem, 4vw, 1.4rem);
            color: #ff6b6b;
            font-family: 'Dancing Script', cursive;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 107, 107, 0.2);
            position: relative;
        }

        .signature::before {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 1px;
            background: linear-gradient(90deg, transparent, #ff6b6b, transparent);
        }

        .close-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #ff6b6b, #ff5252);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            font-weight: 300;
            touch-action: manipulation;
            z-index: 1001;
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);
        }

        .close-btn:hover {
            transform: rotate(90deg) scale(1.1);
        }

        /* Snowflakes */
        .snowflake {
            position: absolute;
            background: white;
            border-radius: 50%;
            pointer-events: none;
            opacity: 0.8;
            filter: blur(1px);
            z-index: 1;
            box-shadow: 0 0 8px rgba(255, 255, 255, 0.5);
        }

        /* Animations */
        @keyframes gradientShift {
            0% {
                background-position: 0% 0%;
            }
            100% {
                background-position: 100% 100%;
            }
        }

        @keyframes float {
            0% {
                transform: translate(0, 0) rotate(0deg);
            }
            25% {
                transform: translate(100px, 100px) rotate(90deg);
            }
            50% {
                transform: translate(0, 200px) rotate(180deg);
            }
            75% {
                transform: translate(-100px, 100px) rotate(270deg);
            }
            100% {
                transform: translate(0, 0) rotate(360deg);
            }
        }

        @keyframes fall {
            0% {
                transform: translate(0, 0) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translate(var(--end-x), 100vh) rotate(360deg);
                opacity: 0;
            }
        }

        /* Mobile-specific optimizations */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .header {
                margin-bottom: 35px;
            }
            
            .magic-button {
                width: 92%;
                max-width: 340px;
            }
            
            .greeting-card {
                width: 94%;
                padding: 30px 24px;
            }
            
            .message-container {
                padding: 24px;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 12px;
            }
            
            .header {
                margin-bottom: 30px;
            }
            
            .christmas-title {
                font-size: 2.8rem;
            }
            
            .magic-button {
                width: 90%;
                padding: 20px 35px;
                font-size: 1.15rem;
            }
            
            .greeting-card {
                width: 96%;
                padding: 26px 22px;
                max-height: 80vh;
            }
            
            .message-container {
                padding: 22px;
            }
        }

        @media (max-height: 600px) {
            .header {
                margin-bottom: 25px;
            }
            
            .christmas-title {
                font-size: 2.5rem;
            }
            
            .magic-button {
                margin-bottom: 25px;
                padding: 18px 32px;
                font-size: 1.1rem;
            }
            
            .greeting-card {
                max-height: 78vh;
                padding: 24px 20px;
            }
        }

        /* Prevent text selection */
        .no-select {
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
        }
    </style>
</head>
<body class="no-select">
    <!-- Animated Background Effect -->
    <div class="background-effect">
        <div class="gradient-overlay"></div>
        <div class="floating-shapes" id="floatingShapes"></div>
    </div>

    <!-- Main Container -->
    <div class="container">
        <header class="header">
            <h1 class="christmas-title">Merry Christmas</h1>
            <p class="subtitle">Tap below for a special holiday message</p>
        </header>

        <button class="magic-button" id="magicButton">
            <span class="button-glow"></span>
            Open Christmas Greeting
        </button>
    </div>

    <!-- Greeting Card -->
    <div class="greeting-card" id="greetingCard">
        <button class="close-btn" id="closeBtn">×</button>
        
        <div class="card-header">
            <h2 class="card-title">Merry Christmas</h2>
            <p class="card-subtitle">A Message for You</p>
        </div>
        
        <div class="message-container">
            <div class="message-decoration"></div>
            <div class="message-content">
                <p>May this season bring you peace, warmth, and genuine happiness. May your heart feel light, your home feel joyful, and the coming year open doors to better days and new opportunities. Wishing you love, laughter, and good moments that last beyond the holidays.</p>
            </div>
            <div class="message-decoration-bottom"></div>
        </div>
        
        <div class="signature">
            <p>— Robby</p>
        </div>
    </div>

    <!-- Audio -->
    <audio id="christmasMusic" loop playsinline>
        <source src="https://fwrobby.site/merry-christmas/christmas_music.mp3" type="audio/mpeg">
    </audio>

    <script>
        // DOM Elements
        const magicButton = document.getElementById('magicButton');
        const greetingCard = document.getElementById('greetingCard');
        const closeBtn = document.getElementById('closeBtn');
        const christmasMusic = document.getElementById('christmasMusic');
        const floatingShapes = document.getElementById('floatingShapes');

        // Create floating background shapes
        function createFloatingShapes() {
            const shapeCount = 8;
            const sizes = [200, 250, 300, 350];
            const opacities = [0.02, 0.03, 0.04];
            
            for (let i = 0; i < shapeCount; i++) {
                const shape = document.createElement('div');
                shape.className = 'shape';
                
                // Random size
                const size = sizes[Math.floor(Math.random() * sizes.length)];
                shape.style.width = `${size}px`;
                shape.style.height = `${size}px`;
                
                // Random position
                shape.style.left = `${Math.random() * 100}%`;
                shape.style.top = `${Math.random() * 100}%`;
                
                // Random opacity
                shape.style.opacity = opacities[Math.floor(Math.random() * opacities.length)];
                
                // Random animation duration and direction
                const duration = Math.random() * 30 + 30;
                const delay = Math.random() * 10;
                shape.style.animationDuration = `${duration}s`;
                shape.style.animationDelay = `${delay}s`;
                
                // Random color
                const colors = [
                    'rgba(255, 107, 107, 0.1)',
                    'rgba(107, 107, 255, 0.1)',
                    'rgba(107, 255, 107, 0.1)'
                ];
                shape.style.background = colors[Math.floor(Math.random() * colors.length)];
                
                floatingShapes.appendChild(shape);
            }
        }

        // Create snowflakes - ALWAYS RUNNING
        function createSnowflakes() {
            const snowflakeCount = 100;
            
            for (let i = 0; i < snowflakeCount; i++) {
                const snowflake = document.createElement('div');
                snowflake.className = 'snowflake';
                
                // Random size
                const size = Math.random() * 8 + 3;
                snowflake.style.width = `${size}px`;
                snowflake.style.height = `${size}px`;
                
                // Random position
                snowflake.style.left = `${Math.random() * 100}vw`;
                snowflake.style.top = '-20px';
                
                // Random opacity
                snowflake.style.opacity = Math.random() * 0.7 + 0.2;
                
                // Random animation
                const duration = Math.random() * 20 + 15;
                const delay = Math.random() * 10;
                const endX = (Math.random() - 0.5) * 150;
                snowflake.style.setProperty('--end-x', `${endX}px`);
                
                snowflake.style.animation = `fall ${duration}s linear ${delay}s infinite`;
                
                document.body.appendChild(snowflake);
            }
        }

        // Mobile-friendly audio playback
        function startMusic() {
            // Set volume
            christmasMusic.volume = 0.25;
            
            // iOS requires user interaction for audio
            const playPromise = christmasMusic.play();
            
            if (playPromise !== undefined) {
                playPromise.catch(error => {
                    console.log("Autoplay prevented, will start after user interaction");
                    
                    const startMusicOnInteraction = () => {
                        christmasMusic.play().catch(e => console.log("Still blocked"));
                        document.removeEventListener('click', startMusicOnInteraction);
                        document.removeEventListener('touchstart', startMusicOnInteraction);
                    };
                    
                    document.addEventListener('click', startMusicOnInteraction, { once: true });
                    document.addEventListener('touchstart', startMusicOnInteraction, { once: true });
                });
            }
        }

        // Start Christmas Magic (show greeting card)
        function showGreeting() {
            greetingCard.classList.add('active');
            magicButton.style.display = 'none';
        }

        // Close greeting card
        function closeGreeting() {
            greetingCard.classList.remove('active');
            magicButton.style.display = 'block';
        }

        // Initialize everything
        function init() {
            // Create background shapes
            createFloatingShapes();
            
            // Start snow immediately
            createSnowflakes();
            
            // Start music immediately
            startMusic();
            
            // Event Listeners
            magicButton.addEventListener('click', showGreeting);
            magicButton.addEventListener('touchstart', (e) => {
                e.preventDefault();
                showGreeting();
            });
            
            closeBtn.addEventListener('click', closeGreeting);
            closeBtn.addEventListener('touchstart', (e) => {
                e.preventDefault();
                closeGreeting();
            });

            // Close card when clicking outside
            greetingCard.addEventListener('touchstart', (e) => {
                if (e.target === greetingCard) {
                    closeGreeting();
                }
            });
            
            greetingCard.addEventListener('click', (e) => {
                if (e.target === greetingCard) {
                    closeGreeting();
                }
            });

            // Keyboard controls
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && greetingCard.classList.contains('active')) {
                    closeGreeting();
                }
                if ((e.key === ' ' || e.key === 'Enter') && !greetingCard.classList.contains('active')) {
                    showGreeting();
                }
            });

            // Prevent scrolling
            document.addEventListener('wheel', preventScroll, { passive: false });
            document.addEventListener('touchmove', preventScroll, { passive: false });
            
            // Ensure proper viewport on mobile
            setViewportHeight();
            window.addEventListener('resize', setViewportHeight);
            window.addEventListener('orientationchange', setViewportHeight);
        }

        // Set proper height for mobile
        function setViewportHeight() {
            const vh = window.innerHeight * 0.01;
            document.documentElement.style.setProperty('--vh', `${vh}px`);
        }

        // Prevent scrolling
        function preventScroll(e) {
            if (!greetingCard.classList.contains('active')) {
                e.preventDefault();
                return false;
            }
        }

        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', init);

        // Additional mobile optimization for iOS
        document.addEventListener('touchstart', function() {}, { passive: true });
        
        // Handle iOS audio context
        if (/iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream) {
            document.addEventListener('touchstart', function() {
                if (christmasMusic.paused) {
                    christmasMusic.play().then(() => {
                        christmasMusic.pause();
                    }).catch(() => {});
                }
            }, { once: true });
        }

        // Add audio context resume for mobile browsers
        function resumeAudioContext() {
            if (christmasMusic.paused) {
                christmasMusic.play().catch(e => {
                    console.log("Audio play failed, will retry on user interaction");
                });
            }
        }

        // Try to resume audio on any user interaction
        document.addEventListener('click', resumeAudioContext, { once: true });
        document.addEventListener('touchstart', resumeAudioContext, { once: true });
    </script>
</body>
</html>