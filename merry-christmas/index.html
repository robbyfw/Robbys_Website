<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <!-- SEO Meta Tags -->
    <title>Merry Christmas | Warm Holiday Greetings</title>
    <meta name="description" content="Christmas greetings and warm wishes for the holiday season. May this Christmas bring you peace, joy, and happiness.">
    <meta name="keywords" content="Christmas, Merry Christmas, holiday greetings, festive season, Christmas wishes">
    <meta name="author" content="Robby">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="https://fwrobby.site/merry-christmas/picture.png">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        html, body {
            height: 100%;
            overflow: hidden;
            touch-action: none;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            min-height: -webkit-fill-available;
            color: #fff;
            position: fixed;
            width: 100%;
            height: 100%;
        }

        /* Elegant Background */
        .background-effect {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }

        .gradient-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 30%, rgba(220, 20, 60, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(30, 144, 255, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(50, 205, 50, 0.15) 0%, transparent 50%);
        }

        /* Main Container */
        .container {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            height: -webkit-fill-available;
            padding: 20px;
            position: relative;
            z-index: 2;
            max-width: 100%;
            overflow: hidden;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 0 15px;
            width: 100%;
            max-width: 600px;
        }

        .christmas-title {
            font-family: 'Dancing Script', cursive;
            font-size: clamp(2.8rem, 8vw, 5rem);
            background: linear-gradient(45deg, #ff6b6b, #ffd93d, #6bcf7f);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 12px;
            letter-spacing: 1px;
            line-height: 1.2;
            word-wrap: break-word;
        }

        .subtitle {
            font-size: clamp(1rem, 3.5vw, 1.3rem);
            color: rgba(255, 255, 255, 0.85);
            font-weight: 300;
            letter-spacing: 0.5px;
            line-height: 1.4;
        }

        /* Main Button */
        .magic-button {
            background: linear-gradient(135deg, #ff6b6b, #ff8e53);
            color: white;
            border: none;
            padding: clamp(16px, 4vw, 22px) clamp(35px, 8vw, 55px);
            font-size: clamp(1.1rem, 3.5vw, 1.4rem);
            font-family: 'Inter', sans-serif;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 
                0 10px 30px rgba(255, 107, 107, 0.3),
                0 0 0 1px rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
            margin-bottom: 30px;
            font-weight: 500;
            letter-spacing: 1px;
            min-height: 56px;
            touch-action: manipulation;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
        }

        .magic-button:active {
            transform: scale(0.98);
        }

        .magic-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.7s;
        }

        .magic-button:hover::before {
            left: 100%;
        }

        /* Greeting Card */
        .greeting-card {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            width: 92%;
            max-width: 500px;
            max-height: 85vh;
            background: rgba(255, 255, 255, 0.98);
            border-radius: 20px;
            padding: clamp(25px, 5vw, 40px) clamp(20px, 4vw, 35px);
            box-shadow: 
                0 25px 50px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.6);
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }

        .greeting-card.active {
            opacity: 1;
            visibility: visible;
            transform: translate(-50%, -50%) scale(1);
        }

        .card-header {
            text-align: center;
            margin-bottom: 25px;
        }

        .card-title {
            font-family: 'Dancing Script', cursive;
            font-size: clamp(2.2rem, 6vw, 3rem);
            color: #ff6b6b;
            margin-bottom: 8px;
            line-height: 1.2;
        }

        .card-subtitle {
            color: #666;
            font-size: clamp(0.9rem, 3vw, 1.1rem);
            font-weight: 400;
        }

        .message-content {
            font-size: clamp(1rem, 3.5vw, 1.2rem);
            line-height: 1.7;
            color: #333;
            text-align: center;
            padding: clamp(18px, 4vw, 25px);
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(245, 245, 245, 0.9));
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            margin-bottom: 20px;
            font-weight: 400;
        }

        .signature {
            text-align: center;
            font-size: clamp(1.1rem, 3.5vw, 1.3rem);
            color: #ff6b6b;
            font-family: 'Dancing Script', cursive;
            margin-top: 15px;
        }

        .close-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: #ff6b6b;
            color: white;
            border: none;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            font-weight: 300;
            touch-action: manipulation;
            z-index: 1001;
        }

        .close-btn:active {
            transform: scale(0.9);
        }

        /* Snowflakes */
        .snowflake {
            position: absolute;
            background: white;
            border-radius: 50%;
            pointer-events: none;
            opacity: 0.8;
            filter: blur(0.5px);
            z-index: 1;
        }

        /* Minimal Decorations */
        .decoration {
            position: fixed;
            z-index: 1;
            pointer-events: none;
            opacity: 0.6;
            font-size: clamp(1.2rem, 3vw, 1.5rem);
        }

        /* Mobile-specific optimizations */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .header {
                margin-bottom: 30px;
            }
            
            .magic-button {
                width: 90%;
                max-width: 320px;
            }
            
            .greeting-card {
                width: 95%;
                padding: 25px 20px;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 10px;
            }
            
            .header {
                margin-bottom: 25px;
            }
            
            .christmas-title {
                font-size: 2.5rem;
            }
            
            .subtitle {
                font-size: 1rem;
            }
            
            .magic-button {
                width: 85%;
                padding: 18px 30px;
                font-size: 1.1rem;
            }
            
            .greeting-card {
                width: 96%;
                padding: 22px 18px;
                max-height: 80vh;
            }
            
            .message-content {
                padding: 16px;
                font-size: 1rem;
            }
        }

        @media (max-height: 600px) {
            .header {
                margin-bottom: 20px;
            }
            
            .christmas-title {
                font-size: 2.2rem;
            }
            
            .magic-button {
                margin-bottom: 20px;
                padding: 14px 28px;
                font-size: 1rem;
            }
            
            .greeting-card {
                max-height: 75vh;
                padding: 20px 16px;
            }
        }

        /* Prevent text selection */
        .no-select {
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
        }

        /* Animations */
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-15px) rotate(180deg); }
        }

        @keyframes fall {
            0% {
                transform: translateY(-100px) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }
    </style>
</head>
<body class="no-select">
    <!-- Background Effect -->
    <div class="background-effect">
        <div class="gradient-overlay"></div>
    </div>

    <!-- Decorations -->
    <div id="decorations"></div>

    <!-- Main Container -->
    <div class="container">
        <header class="header">
            <h1 class="christmas-title">Merry Christmas</h1>
            <p class="subtitle">Tap below for a special holiday message</p>
        </header>

        <button class="magic-button" id="magicButton">
            Open Christmas Greeting
        </button>
    </div>

    <!-- Greeting Card -->
    <div class="greeting-card" id="greetingCard">
        <button class="close-btn" id="closeBtn">Ã—</button>
        
        <div class="card-header">
            <h2 class="card-title">Merry Christmas</h2>
            <p class="card-subtitle">A Message for You</p>
        </div>
        
        <div class="message-content">
            <p>May this season bring you peace, warmth, and genuine happiness. May your heart feel light, your home feel joyful, and the coming year open doors to better days and new opportunities. Wishing you love, laughter, and good moments that last beyond the holidays.</p>
        </div>
        
        <div class="signature">
            <p>â€” Robby</p>
        </div>
        
        <div style="text-align: center; margin-top: 25px; font-size: 1.8rem; color: #666;">
            âœ¨
        </div>
    </div>

    <!-- Audio -->
    <audio id="christmasMusic" loop playsinline>
        <source src="https://fwrobby.site/merry-christmas/christmas_music.mp3" type="audio/mpeg">
    </audio>

    <script>
        // DOM Elements
        const magicButton = document.getElementById('magicButton');
        const greetingCard = document.getElementById('greetingCard');
        const closeBtn = document.getElementById('closeBtn');
        const christmasMusic = document.getElementById('christmasMusic');
        const decorations = document.getElementById('decorations');

        // Create snowflakes - ALWAYS RUNNING
        function createSnowflakes() {
            const snowflakeCount = 80;
            
            for (let i = 0; i < snowflakeCount; i++) {
                const snowflake = document.createElement('div');
                snowflake.className = 'snowflake';
                
                // Random size
                const size = Math.random() * 6 + 2;
                snowflake.style.width = `${size}px`;
                snowflake.style.height = `${size}px`;
                
                // Random position
                snowflake.style.left = `${Math.random() * 100}vw`;
                snowflake.style.top = '-20px';
                
                // Random opacity
                snowflake.style.opacity = Math.random() * 0.6 + 0.2;
                
                // Random animation
                const duration = Math.random() * 15 + 10;
                const delay = Math.random() * 5;
                const endX = (Math.random() - 0.5) * 100;
                
                snowflake.style.animation = `fall ${duration}s linear ${delay}s infinite`;
                
                // Create falling animation
                const style = document.createElement('style');
                style.textContent = `
                    @keyframes fall {
                        0% {
                            transform: translate(0, 0) rotate(0deg);
                            opacity: ${snowflake.style.opacity};
                        }
                        100% {
                            transform: translate(${endX}px, 100vh) rotate(360deg);
                            opacity: 0;
                        }
                    }
                `;
                document.head.appendChild(style);
                
                document.body.appendChild(snowflake);
            }
        }

        // Create minimal decorations
        function createDecorations() {
            const symbols = ['â„ï¸', 'âœ¨', 'ðŸŒŸ'];
            const decorationCount = 12;
            
            for (let i = 0; i < decorationCount; i++) {
                const decoration = document.createElement('div');
                decoration.className = 'decoration';
                decoration.textContent = symbols[Math.floor(Math.random() * symbols.length)];
                
                // Random position
                decoration.style.left = `${Math.random() * 100}vw`;
                decoration.style.top = `${Math.random() * 100}vh`;
                
                // Random animation
                const duration = Math.random() * 10 + 15;
                decoration.style.animation = `float ${duration}s ease-in-out infinite`;
                
                decorations.appendChild(decoration);
            }
        }

        // Mobile-friendly audio playback
        function startMusic() {
            // Set volume low for mobile
            christmasMusic.volume = 0.25;
            
            // iOS requires user interaction for audio
            const playPromise = christmasMusic.play();
            
            if (playPromise !== undefined) {
                playPromise.catch(error => {
                    console.log("Autoplay prevented, will start after user interaction");
                    // Add a one-time click listener to start music
                    const startMusicOnInteraction = () => {
                        christmasMusic.play().catch(e => console.log("Still blocked"));
                        document.removeEventListener('click', startMusicOnInteraction);
                        document.removeEventListener('touchstart', startMusicOnInteraction);
                    };
                    
                    document.addEventListener('click', startMusicOnInteraction, { once: true });
                    document.addEventListener('touchstart', startMusicOnInteraction, { once: true });
                });
            }
        }

        // Start Christmas Magic (show greeting card)
        function showGreeting() {
            greetingCard.classList.add('active');
            magicButton.style.display = 'none';
        }

        // Close greeting card
        function closeGreeting() {
            greetingCard.classList.remove('active');
            magicButton.style.display = 'block';
        }

        // Initialize everything
        function init() {
            // Start snow immediately
            createSnowflakes();
            
            // Start music immediately
            startMusic();
            
            // Create decorations
            createDecorations();
            
            // Event Listeners
            magicButton.addEventListener('click', showGreeting);
            magicButton.addEventListener('touchstart', (e) => {
                e.preventDefault();
                showGreeting();
            });
            
            closeBtn.addEventListener('click', closeGreeting);
            closeBtn.addEventListener('touchstart', (e) => {
                e.preventDefault();
                closeGreeting();
            });

            // Close card when clicking outside on mobile
            greetingCard.addEventListener('touchstart', (e) => {
                if (e.target === greetingCard) {
                    closeGreeting();
                }
            });
            
            greetingCard.addEventListener('click', (e) => {
                if (e.target === greetingCard) {
                    closeGreeting();
                }
            });

            // Keyboard controls
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && greetingCard.classList.contains('active')) {
                    closeGreeting();
                }
                if ((e.key === ' ' || e.key === 'Enter') && !greetingCard.classList.contains('active')) {
                    showGreeting();
                }
            });

            // Prevent any scrolling
            document.addEventListener('wheel', preventScroll, { passive: false });
            document.addEventListener('touchmove', preventScroll, { passive: false });
            
            // Ensure proper viewport on mobile
            setViewportHeight();
            window.addEventListener('resize', setViewportHeight);
            window.addEventListener('orientationchange', setViewportHeight);
        }

        // Set proper height for mobile
        function setViewportHeight() {
            const vh = window.innerHeight * 0.01;
            document.documentElement.style.setProperty('--vh', `${vh}px`);
        }

        // Prevent scrolling
        function preventScroll(e) {
            if (!greetingCard.classList.contains('active')) {
                e.preventDefault();
                return false;
            }
        }

        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', init);

        // Additional mobile optimization for iOS
        document.addEventListener('touchstart', function() {}, { passive: true });
        
        // Handle iOS audio context
        if (/iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream) {
            // iOS specific optimizations
            document.addEventListener('touchstart', function() {
                // This creates an audio context which helps with iOS audio
                if (christmasMusic.paused) {
                    christmasMusic.play().then(() => {
                        christmasMusic.pause();
                    }).catch(() => {});
                }
            }, { once: true });
        }

        // Add audio context resume for mobile browsers
        function resumeAudioContext() {
            if (christmasMusic.paused) {
                christmasMusic.play().catch(e => {
                    console.log("Audio play failed, will retry on user interaction");
                });
            }
        }

        // Try to resume audio on any user interaction
        document.addEventListener('click', resumeAudioContext, { once: true });
        document.addEventListener('touchstart', resumeAudioContext, { once: true });
    </script>
</body>
</html>